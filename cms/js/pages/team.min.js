"use strict";$(document).ready(function(){var a;$(document).find("table").DataTable({dom:"Bfrtip",buttons:[],columnDefs:[{orderable:true,targets:"_all"},{className:"text-left",targets:"_all"}],order:[[2,"asc"]],searching:true,info:true,paging:true,language:{}});$('[data-action="get"]').on("click",function(){a=$(this).data("id");$.ajax({url:"",type:"POST",data:"id="+a+"&action=get",processData:false,cache:false,dataType:"json",success:function(b){if(b.status=="success"){$('input[name="name"]').val(b.data.name);$('textarea[name="position_es"]').val(b.data.position.es);$('textarea[name="position_en"]').val(b.data.position.en);$('textarea[name="semblance_es"]').val(b.data.semblance.es);$('textarea[name="semblance_en"]').val(b.data.semblance.en);$('input[name="avatar"]').parents(".uploader").find("figure[data-preview] > img").attr("src","../uploads/"+b.data.avatar);$('input[name="priority"]').val(b.data.priority);$('[data-modal="datas"] header > h4').html("Detalles | Editar");$('[data-modal="datas"] main > form').attr("data-submit-action","edit");$('[data-modal="datas"]').addClass("view").animate({scrollTop:0},0)}else{$('[data-modal="alert"] main > p').html(b.message);$('[data-modal="alert"]').addClass("view").animate({scrollTop:0},0)}}})});$('[data-modal="datas"]').modal().onSuccess(function(){$('form[name="datas"]').submit()});$('[data-modal="datas"]').modal().onCancel(function(){$("figure[data-preview] > img").attr("src","../images/empty.png");$('[data-modal="datas"] header > h4').html("Nuevo");$('[data-modal="datas"] main > form').attr("data-submit-action","new");$('[data-modal="datas"] main > form')[0].reset();$('[data-modal="datas"] main > form [name]').parent().removeClass("error");$('[data-modal="datas"] main > form [name]').parent().find("p.error").remove()});$('form[name="datas"]').on("submit",function(c){c.preventDefault();var b=new FormData(this);b.append("id",a);b.append("action",$(this).data("submit-action"));$.ajax({url:"",type:"POST",data:b,contentType:false,processData:false,cache:false,dataType:"json",success:function(d){checkFormValidations($(this),d,function(){$('[data-modal="datas"]').removeClass("view").animate({scrollTop:0},0);$('[data-modal="success"] main > p').html(d.message);$('[data-modal="success"]').addClass("view").animate({scrollTop:0},0)})}})});$('[data-action="delete"]').on("click",function(){a=$(this).data("id");$('[data-modal="delete"]').addClass("view").animate({scrollTop:0},0)});$('[data-modal="delete"]').modal().onSuccess(function(){$.ajax({url:"",type:"POST",data:"id="+a+"&action=delete",processData:false,cache:false,dataType:"json",success:function(b){$('[data-modal="delete"]').removeClass("view").animate({scrollTop:0},0);if(b.status=="success"){$('[data-modal="success"] main > p').html(b.message);$('[data-modal="success"]').addClass("view").animate({scrollTop:0},0)}else{$('[data-modal="alert"] main > p').html(b.message);$('[data-modal="alert"]').addClass("view").animate({scrollTop:0},0)}}})})});